Version 4
SHEET 1 1228 980
WIRE -672 -944 -912 -944
WIRE -560 -944 -672 -944
WIRE -352 -944 -480 -944
WIRE -256 -944 -352 -944
WIRE -48 -944 -176 -944
WIRE 64 -944 -48 -944
WIRE 256 -944 144 -944
WIRE 432 -944 256 -944
WIRE 592 -944 512 -944
WIRE -672 -912 -672 -944
WIRE -352 -912 -352 -944
WIRE -48 -912 -48 -944
WIRE 256 -912 256 -944
WIRE -672 -720 -672 -832
WIRE -624 -720 -672 -720
WIRE -352 -720 -352 -832
WIRE -304 -720 -352 -720
WIRE -48 -720 -48 -832
WIRE 0 -720 -48 -720
WIRE 256 -720 256 -832
WIRE 304 -720 256 -720
WIRE -624 -688 -624 -720
WIRE -304 -688 -304 -720
WIRE 0 -688 0 -720
WIRE 304 -688 304 -720
WIRE -672 -672 -736 -672
WIRE -352 -672 -416 -672
WIRE -48 -672 -112 -672
WIRE 256 -672 192 -672
WIRE -736 -576 -736 -672
WIRE -624 -576 -624 -608
WIRE -416 -576 -416 -672
WIRE -304 -576 -304 -608
WIRE -112 -576 -112 -672
WIRE 0 -576 0 -608
WIRE 192 -576 192 -672
WIRE 304 -576 304 -608
WIRE -672 -448 -672 -624
WIRE -352 -448 -352 -624
WIRE -48 -448 -48 -624
WIRE 256 -448 256 -624
WIRE -608 -400 -624 -400
WIRE -288 -400 -304 -400
WIRE 16 -400 0 -400
WIRE 320 -400 304 -400
WIRE -656 -352 -656 -384
WIRE -640 -352 -640 -384
WIRE -640 -352 -656 -352
WIRE -624 -352 -624 -384
WIRE -624 -352 -640 -352
WIRE -608 -352 -608 -400
WIRE -608 -352 -624 -352
WIRE -336 -352 -336 -384
WIRE -320 -352 -320 -384
WIRE -320 -352 -336 -352
WIRE -304 -352 -304 -384
WIRE -304 -352 -320 -352
WIRE -288 -352 -288 -400
WIRE -288 -352 -304 -352
WIRE -32 -352 -32 -384
WIRE -16 -352 -16 -384
WIRE -16 -352 -32 -352
WIRE 0 -352 0 -384
WIRE 0 -352 -16 -352
WIRE 16 -352 16 -400
WIRE 16 -352 0 -352
WIRE 272 -352 272 -384
WIRE 288 -352 288 -384
WIRE 288 -352 272 -352
WIRE 304 -352 304 -384
WIRE 304 -352 288 -352
WIRE 320 -352 320 -400
WIRE 320 -352 304 -352
WIRE -640 -336 -640 -352
WIRE -320 -336 -320 -352
WIRE -16 -336 -16 -352
WIRE 288 -336 288 -352
WIRE -592 -288 -992 -288
WIRE -288 -288 -592 -288
WIRE 16 -288 -288 -288
WIRE -688 -224 -688 -384
WIRE -368 -224 -368 -384
WIRE -64 -224 -64 -384
WIRE 240 -224 240 -384
WIRE 480 -192 480 -240
WIRE -992 -128 -992 -288
WIRE -992 -128 -1424 -128
WIRE -864 -128 -992 -128
WIRE -688 -128 -688 -224
WIRE -688 -128 -704 -128
WIRE -592 -128 -592 -288
WIRE -544 -128 -592 -128
WIRE -368 -128 -368 -224
WIRE -368 -128 -384 -128
WIRE -288 -128 -288 -288
WIRE -240 -128 -288 -128
WIRE -64 -128 -64 -224
WIRE -64 -128 -80 -128
WIRE 16 -128 16 -288
WIRE 64 -128 16 -128
WIRE 240 -128 240 -224
WIRE 240 -128 224 -128
WIRE -1632 -112 -1632 -128
WIRE -1424 -96 -1424 -128
WIRE -864 -80 -896 -80
WIRE -544 -80 -576 -80
WIRE -240 -80 -272 -80
WIRE 64 -80 32 -80
WIRE 480 -64 480 -112
WIRE -1632 16 -1632 -32
WIRE -1424 16 -1424 -16
WIRE -784 32 -784 -32
WIRE -784 32 -992 32
WIRE -464 32 -464 -32
WIRE -464 32 -784 32
WIRE -160 32 -160 -32
WIRE -160 32 -464 32
WIRE 144 32 144 -32
WIRE 144 32 -160 32
WIRE -896 112 -896 -80
WIRE -672 112 -672 -384
WIRE -672 112 -896 112
WIRE -576 112 -576 -80
WIRE -352 112 -352 -384
WIRE -352 112 -576 112
WIRE -272 112 -272 -80
WIRE -48 112 -48 -384
WIRE -48 112 -272 112
WIRE 32 112 32 -80
WIRE 256 112 256 -384
WIRE 256 112 32 112
WIRE -864 256 -1584 256
WIRE -672 256 -672 112
WIRE -672 256 -704 256
WIRE -544 256 -672 256
WIRE -352 256 -352 112
WIRE -352 256 -384 256
WIRE -240 256 -352 256
WIRE -48 256 -48 112
WIRE -48 256 -80 256
WIRE 64 256 -48 256
WIRE 256 256 256 112
WIRE 256 256 224 256
WIRE 496 256 256 256
WIRE 912 256 656 256
WIRE -864 304 -896 304
WIRE -544 304 -576 304
WIRE -240 304 -272 304
WIRE 64 304 32 304
WIRE 496 304 464 304
WIRE -992 416 -992 32
WIRE -992 416 -1440 416
WIRE -784 416 -784 352
WIRE -784 416 -992 416
WIRE -464 416 -464 352
WIRE -464 416 -784 416
WIRE -160 416 -160 352
WIRE -160 416 -464 416
WIRE 144 416 144 352
WIRE 144 416 -160 416
WIRE 576 416 576 352
WIRE 576 416 144 416
WIRE -1584 480 -1584 256
WIRE -1440 480 -1440 416
WIRE -1584 624 -1584 560
WIRE -1440 624 -1440 560
WIRE -528 656 -528 640
WIRE -800 736 -800 720
WIRE -656 736 -656 720
WIRE -528 768 -528 736
WIRE -960 832 -960 800
WIRE -800 864 -800 816
WIRE -656 864 -656 816
WIRE -960 960 -960 912
FLAG -896 304 clk
FLAG -576 304 clk
FLAG -272 304 clk
FLAG 32 304 clk
FLAG -1440 624 0
FLAG 480 -64 0
FLAG 480 -240 clk
FLAG -1584 624 0
FLAG 592 -944 0
FLAG -912 -944 v_dac
FLAG -1632 16 0
FLAG -1424 16 0
FLAG -1632 -128 in
FLAG -640 -336 0
FLAG -320 -336 0
FLAG -16 -336 0
FLAG 288 -336 0
FLAG 464 304 clk
FLAG -624 -576 0
FLAG -736 -576 0
FLAG -304 -576 0
FLAG -416 -576 0
FLAG 0 -576 0
FLAG -112 -576 0
FLAG 304 -576 0
FLAG 192 -576 0
FLAG -688 -224 bit3
FLAG -368 -224 bit2
FLAG -64 -224 bit1
FLAG 240 -224 bit0
FLAG -960 960 0
FLAG -960 800 adc_integer_number
FLAG -656 864 0
FLAG -800 864 0
FLAG -800 720 v_ref_V
FLAG -656 720 digitalised_voltage
FLAG -528 768 0
FLAG -528 640 error
SYMBOL Digital\\dflop 144 208 R0
SYMATTR InstName F0_dash
SYMATTR SpiceLine Td=10n
SYMBOL Digital\\dflop -160 208 R0
SYMATTR InstName F1_dash
SYMATTR SpiceLine Td=10n
SYMBOL Digital\\dflop -464 208 R0
SYMATTR InstName F2_dash
SYMATTR SpiceLine Td=10n
SYMBOL Digital\\dflop -784 208 R0
SYMATTR InstName F3_dash
SYMATTR SpiceLine Td=10n
SYMBOL voltage -1440 464 R0
WINDOW 3 24 96 Invisible 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value PULSE(0 1 0 10n 10n {t_clk*0.25} {t_clk*0.5} 1)
SYMATTR InstName Reset
SYMBOL voltage 480 -208 R0
WINDOW 3 24 96 Invisible 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value PULSE(0 1 100ms 10n 10n {t_clk*0.5} {t_clk})
SYMATTR InstName CLK_SRC
SYMBOL voltage -1584 464 R0
WINDOW 3 24 96 Invisible 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value PULSE(0 1 {t_clk-10m} 10n 10n {t_clk*0.25} {t_clk*0.5} 1)
SYMATTR InstName V1
SYMBOL Digital\\dflop 144 -176 R0
SYMATTR InstName F0
SYMATTR SpiceLine Td=10n
SYMBOL Digital\\dflop -160 -176 R0
SYMATTR InstName F1
SYMATTR SpiceLine Td=10n
SYMBOL Digital\\dflop -464 -176 R0
SYMATTR InstName F2
SYMATTR SpiceLine Td=10n
SYMBOL Digital\\dflop -784 -176 R0
SYMATTR InstName F3
SYMATTR SpiceLine Td=10n
SYMBOL res 416 -928 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R1
SYMATTR Value {2*R}
SYMBOL res 272 -816 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R2
SYMATTR Value {2*R}
SYMBOL res 48 -928 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R3
SYMATTR Value {R}
SYMBOL res -32 -816 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R4
SYMATTR Value {2*R}
SYMBOL res -272 -928 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R5
SYMATTR Value {R}
SYMBOL res -336 -816 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R6
SYMATTR Value {2*R}
SYMBOL res -576 -928 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R7
SYMATTR Value {R}
SYMBOL res -656 -816 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R8
SYMATTR Value {2*R}
SYMBOL voltage -1632 -128 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value {0.21*V_ref}
SYMBOL bv -1424 -112 R0
SYMATTR InstName B6
SYMATTR Value V=if(V(v_dac)>V(in), 0,1)
SYMBOL Digital\\or -720 -416 R270
SYMATTR InstName z3
SYMBOL Digital\\or -400 -416 R270
SYMATTR InstName z2
SYMBOL Digital\\or -96 -416 R270
SYMATTR InstName z1
SYMBOL Digital\\or 208 -416 R270
SYMATTR InstName z0
SYMBOL Digital\\dflop 576 208 R0
SYMATTR InstName EOC
SYMATTR SpiceLine Td=10n
SYMBOL e2 -624 -704 R0
SYMATTR InstName E1
SYMATTR Value {V_ref}
SYMBOL e2 -304 -704 R0
SYMATTR InstName E2
SYMATTR Value {V_ref}
SYMBOL e2 0 -704 R0
SYMATTR InstName E3
SYMATTR Value {V_ref}
SYMBOL e2 304 -704 R0
SYMATTR InstName E4
SYMATTR Value {V_ref}
SYMBOL bv -960 816 R0
SYMATTR InstName B1
SYMATTR Value V=(V(bit0)*pow(2,0))+(V(bit1)*pow(2,1))+(V(bit2)*pow(2,2))+(V(bit3)*pow(2,3))
SYMBOL bv -656 720 R0
SYMATTR InstName B2
SYMATTR Value V=(V(v_ref_V)*V(adc_integer_number))/pow(2,4)
SYMBOL voltage -800 720 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value {V_ref }
SYMBOL bv -528 640 R0
SYMATTR InstName B3
SYMATTR Value V=abs(V(in)-V(digitalised_voltage))
TEXT 456 -440 Left 2 !.param t_clk = 100m
TEXT -1296 512 Left 2 !.tran 1s
TEXT 624 -536 Right 2 !.param R = 100k
TEXT -600 -992 Right 6 ;MSB
TEXT 392 -992 Right 6 ;LSB
TEXT 456 -512 Left 2 !.param V_ref = 1
TEXT -1064 -1128 Left 5 ;4 BIT DAC
TEXT -1064 -440 Left 5 ;SAR Register
TEXT -1768 -440 Left 5 ;Comperator
TEXT 368 -688 Left 2 ;Switch Model
TEXT 944 256 Left 5 ;EOF
TEXT -1064 464 Left 2 ;Schieberegister: https://de.wikipedia.org/wiki/Schieberegister
RECTANGLE Normal 704 -464 -1072 -1152
RECTANGLE Normal 704 480 -1072 -464
RECTANGLE Normal -1776 112 -1072 -464
